(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{187:function(t,e,i){"use strict";var s=i(38),n=i(55),r=i(30),a=i(56),o=i(109),c=i(195);const l=(t,e)=>{const{type:i,value:s}=e;let n;if(s)return n="percentage"===i?t*(100-s)/100:t-s,n>0?n:0};var p={name:"APrices",props:{product:{type:Object,required:!0},isLiteral:Boolean,isBig:Boolean,isAmountTotal:Boolean,installmentsOption:Object,discountOption:Object,discountText:{type:[String,Boolean],default:""},canShowPriceOptions:{type:Boolean,default:!0}},data(){return{installmentsNumber:0,monthlyInterest:0,discount:{type:null,value:0},extraDiscount:{type:null,value:0,min_amount:0},discountLabel:this.discountText,pointsProgramName:null,pointsMinPrice:0,earnPointsFactor:0}},computed:{i19asOf:()=>Object(n.a)(s.r),i19from:()=>Object(n.a)(s.Gb),i19interestFree:()=>Object(n.a)(s.Ub),i19of:()=>Object(n.a)(s.Gc),i19to:()=>Object(n.a)(s.de),i19upTo:()=>Object(n.a)(s.oe),i19youEarn:()=>Object(n.a)(s.xe),price(){const t=Object(r.a)(this.product);return this.extraDiscount.value&&(!this.extraDiscount.min_amount||t>this.extraDiscount.min_amount)?l(t,this.extraDiscount):t},comparePrice(){return Object(a.a)(this.product)?this.product.base_price:this.extraDiscount.value?Object(r.a)(this.product):void 0},hasVariedPrices(){const{variations:t}=this.product;if(t){const e=Object(r.a)(this.product);for(let i=0;i<t.length;i++){if(Object(r.a)({...this.product,...t[i]})>e)return!0}}return!1},priceWithDiscount(){return this.canShowPriceOptions&&l(this.price,this.discount)},installmentValue(){if(this.canShowPriceOptions&&this.installmentsNumber>=2){if(this.monthlyInterest){const t=this.monthlyInterest/100;return this.price*t/(1-Math.pow(1+t,-this.installmentsNumber))}return this.price/this.installmentsNumber}return 0}},methods:{formatMoney:o.a,updateInstallments(t){if(t){this.monthlyInterest=t.monthly_interest;const e=t.min_installment||5,i=parseInt(this.price/e,10);this.installmentsNumber=Math.min(i,t.max_number)}},updateDiscount(t){!t||t.min_amount&&!(t.min_amount<=this.price)||this.isAmountTotal&&"total"!==t.apply_at||(this.discount=t,!this.discountText&&!1!==this.discountText&&t.label&&(this.discountLabel=`via ${t.label}`))}},watch:{price:{handler(t){this.$emit("fix-price",t)},immediate:!0}},created(){window.$setProductDomainPrice(this.product),this.canShowPriceOptions&&(this.discountOption?this.updateDiscount(this.discountOption):Object(c.a)("apply_discount").then((t=>{t.available_extra_discount&&(this.extraDiscount=t.available_extra_discount)})),this.installmentsOption?this.updateInstallments(this.installmentsOption):Object(c.a)("list_payments").then((t=>{this.updateInstallments(t.installments_option),this.updateDiscount(t.discount_option);const e=t.loyalty_points_programs;this.isLiteral&&e&&this.$nextTick((()=>{for(const t in e){const i=e[t];if(i&&i.earn_percentage>0){this.pointsMinPrice=i.min_subtotal_to_earn,this.pointsProgramName=i.name,this.earnPointsFactor=i.earn_percentage/100;break}}}))})))}};e.a=p},197:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"prices",class:{"prices--literal":t.isLiteral,"prices--big":t.isBig}},[t.comparePrice?i("span",{staticClass:"prices__compare"},[t.isLiteral?[i("small",[t._v(" "+t._s(t.i19from)+" ")]),i("s",[t._v(t._s(t.formatMoney(t.comparePrice)))]),i("small",[t._v(" "+t._s(t.i19to)+" ")])]:i("s",[t._v(t._s(t.formatMoney(t.comparePrice)))])],2):t._e(),i("strong",{staticClass:"prices__value"},[t.hasVariedPrices?i("small",[t._v(" "+t._s(t.i19asOf)+" ")]):t._e(),t._v(" "+t._s(t.formatMoney(t.price))+" ")]),i("transition-group",{attrs:{"enter-active-class":"animated slideInDown"}},[t.earnPointsFactor>0&&!(t.pointsMinPrice>t.price)?i("div",{key:"points",staticClass:"prices__points"},[i("i",{staticClass:"i-check-circle"}),t._v(" "+t._s(t.i19youEarn)+" "),i("span",[t._v(" +"+t._s((t.earnPointsFactor*t.price).toFixed(1))+" ")]),i("em",[t._v(t._s(t.pointsProgramName))])]):t._e(),t.installmentsNumber>1&&t.installmentValue?i("div",{key:"installments",staticClass:"prices__installments"},[t.isLiteral?i("small",[t._v(" "+t._s(t.i19upTo)+" ")]):t._e(),i("strong",[t._v(t._s(t.installmentsNumber)+"x")]),i("small",[t._v(t._s(t.i19of))]),i("span",[t._v(" "+t._s(t.formatMoney(t.installmentValue))+" ")]),t.monthlyInterest?t._e():i("small",[t._v(" "+t._s(t.i19interestFree)+" ")])]):t._e(),"number"==typeof t.priceWithDiscount&&t.priceWithDiscount<t.price?i("div",{key:"discount",staticClass:"prices__discount"},["string"==typeof t.discountLabel&&t.discountLabel?[i("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")]),i("small",{staticClass:"prices__discount-label"},[t._v(" "+t._s(t.discountLabel)+" ")])]:[i("small",[t._v(" "+t._s(t.i19asOf)+" ")]),i("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")])]],2):t._e()])],1)},n=[]},269:function(t,e,i){"use strict";var s=i(38),n=i(55),r=i(109);const a="object"==typeof window&&window.propsShippingLine||{};var o={name:"ShippingLine",props:{shippingLine:{type:Object,required:!0},productionDeadline:{type:Number,default:0},getDeadlineStr:{type:Function,default:a.getDeadlineStr}},computed:{deadlineStr(){const t=this.shippingLine,e=t.posting_deadline&&t.posting_deadline.working_days||t.delivery_time&&t.delivery_time.working_days;let i=t.posting_deadline?t.posting_deadline.days:0;if(t.delivery_time&&(i+=t.delivery_time.days),i+=this.productionDeadline,this.getDeadlineStr){const t=this.getDeadlineStr({days:i,isWorkingDays:e,shippingLine:this.shippingLine});if(t)return t}return i>1?`${Object(n.a)(s.oe)} ${i} `+Object(n.a)(e?s.ve:s.gb).toLowerCase():Object(n.a)(1===i?s.ne:t.pick_up?s.Zc:s.kd)},freightValueStr(){const{shippingLine:t}=this,e="number"==typeof t.total_price?t.total_price:t.price;return e?Object(r.a)(e):Object(n.a)(t.pick_up?s.Bb:s.Cb)}}},c=(i(280),i(66)),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shipping-line"},[i("strong",{staticClass:"mr-2"},[t._v(" "+t._s(t.deadlineStr)+" ")]),i("span",{staticClass:"mr-2"},[t._v(" "+t._s(t.freightValueStr)+" ")]),t.shippingLine.delivery_instructions?i("small",[t._v(" "+t._s(t.shippingLine.delivery_instructions)+" ")]):t._e()])}),[],!1,null,null,null);e.a=l.exports},271:function(t,e,i){var s=i(281);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(193).default)("2e497541",s,!0,{})},280:function(t,e,i){"use strict";i(271)},281:function(t,e,i){(e=i(192)(!0)).push([t.i,".shipping-line>strong{display:inline-block;min-width:120px}.shipping-line>span{display:inline-block}.shipping-line>small{-webkit-line-clamp:2;-webkit-box-orient:vertical;color:var(--text-muted);display:block;display:-webkit-box;line-height:var(--line-height-sm);overflow:hidden}.active .shipping-line>small{color:inherit}","",{version:3,sources:["ShippingLine.scss"],names:[],mappings:"AAAA,sBAAsB,oBAAoB,CAAC,eAAe,CAAC,oBAAoB,oBAAoB,CAAC,qBAAqB,oBAAoB,CAAC,2BAA2B,CAAC,uBAAuB,CAAC,aAAa,CAAC,mBAAmB,CAAC,iCAAiC,CAAC,eAAe,CAAC,6BAA6B,aAAa",file:"ShippingLine.scss",sourcesContent:[".shipping-line>strong{display:inline-block;min-width:120px}.shipping-line>span{display:inline-block}.shipping-line>small{-webkit-line-clamp:2;-webkit-box-orient:vertical;color:var(--text-muted);display:block;display:-webkit-box;line-height:var(--line-height-sm);overflow:hidden}.active .shipping-line>small{color:inherit}"]}]),t.exports=e},485:function(t,e,i){"use strict";i.r(e);i(7),i(2),i(17);var s=i(134),n=i(12),r=i(41),a=i(190),o={name:"confirmation",components:{EcOrderInfo:i(311).a},data:()=>({canUpsertCart:!0}),computed:{...Object(s.c)(["orders","customer"]),orderId(){return this.$route.params.id},order:{get(){return this.orders.find((t=>{let{_id:e}=t;return e===this.orderId}))||{_id:this.orderId}},set(t){if(t&&t._id===this.orderId){const e=this.orders.concat(),i=e.find((e=>{let{_id:i}=e;return i===t._id}));i?Object.assign(i,t):e.push(t),this.setOrders(e),this.$route.params.json||this.$router.push({params:{json:encodeURIComponent(JSON.stringify(t))}})}}}},methods:{...Object(s.d)(["addOrder","setOrders","resetCart"]),...Object(s.b)(["saveCustomer"]),handleUpsertCart(){if(this.canUpsertCart){this.canUpsertCart=!1;const{status:t}=this.order;t&&"cancelled"!==t&&(n.a.data.completed=!0,this.orderId&&(n.a.data.orders||(n.a.data.orders=[]),n.a.data.orders.push(this.orderId)),Object(a.c)().then(this.resetCart))}}},created(){const{customer:t}=this;r.a.checkAuthorization()||t.main_email&&t.doc_number&&r.a.fetchLogin(t.main_email,t.doc_number).then((()=>{this.saveCustomer({ecomPassport:r.a}),this.handleUpsertCart()}))},mounted(){r.a.checkAuthorization()&&this.handleUpsertCart()}},c=i(66),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"confirmation"}},[i("ec-order-info",{attrs:{order:t.order,isNew:!0},on:{"update:order":function(e){t.order=e}}})],1)}),[],!1,null,null,null);e.default=l.exports}}]);